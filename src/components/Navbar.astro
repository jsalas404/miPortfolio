---
import { url } from "../utils/url"

const links = [
  { href: url("#sobre-mi"), label: "Sobre mí" },
  { href: url("#proyectos"), label: "Proyectos" },
  { href: url("#experiencia"), label: "Experiencia" },
  { href: url("#contacto"), label: "Contacto" },
  { href: url("blog"), label: "Blog" },
]
---

<header class="fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-sm border-b border-gray-100">
  <nav class="max-w-5xl mx-auto px-6 h-16 flex items-center justify-between">

    <!-- Logo + reloj -->
    <div class="flex items-center gap-4">
      <a href={url("")} class="text-sm font-semibold tracking-tight text-gray-900 hover:text-gray-600 transition-colors">
        jsalas.dev
      </a>
      <div class="hidden sm:flex items-center gap-1.5 px-3 py-1 bg-gray-50 border border-gray-100 rounded-full">
        <svg class="w-3 h-3 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        <span id="clock" class="text-xs font-mono text-gray-400 tabular-nums">00:00:00</span>
      </div>
    </div>

    <div class="flex items-center gap-4">
      <!-- Links desktop -->
      <ul class="hidden md:flex items-center gap-8">
        {links.map((link) => (
          <li>
            <a href={link.href} class="text-sm text-gray-500 hover:text-gray-900 transition-colors">
              {link.label}
            </a>
          </li>
        ))}
      </ul>

      <!-- Botón hamburguesa — solo visible en móvil -->
      <button
        id="menu-toggle"
        class="md:hidden p-2 rounded-lg text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors"
        aria-label="Abrir menú"
      >
        <!-- Icono hamburguesa -->
        <svg id="icon-open" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="6" x2="21" y2="6"/>
          <line x1="3" y1="12" x2="21" y2="12"/>
          <line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
        <!-- Icono X (cerrar) -->
        <svg id="icon-close" class="w-5 h-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>

  </nav>

  <!-- Menú móvil desplegable -->
  <div id="mobile-menu" class="hidden md:hidden border-t border-gray-100 bg-white/95 backdrop-blur-sm">
    <ul class="max-w-5xl mx-auto px-6 py-4 flex flex-col gap-1">
      {links.map((link) => (
        <li>
          <a
            href={link.href}
            class="mobile-link block py-2.5 px-3 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-colors"
          >
            {link.label}
          </a>
        </li>
      ))}
    </ul>
  </div>
</header>

<script>
  // Reloj
  function updateClock() {
    const clock = document.getElementById("clock")
    if (!clock) return
    const now = new Date().toLocaleTimeString("es-ES", {
      timeZone: "Atlantic/Canary",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      hour12: false,
    })
    clock.textContent = now
  }
  updateClock()
  setInterval(updateClock, 1000)

  // Menú móvil
  const menuToggle = document.getElementById("menu-toggle")
  const mobileMenu = document.getElementById("mobile-menu")
  const iconOpen = document.getElementById("icon-open")
  const iconClose = document.getElementById("icon-close")

  menuToggle?.addEventListener("click", () => {
    const isOpen = !mobileMenu?.classList.contains("hidden")

    mobileMenu?.classList.toggle("hidden", isOpen)
    iconOpen?.classList.toggle("hidden", !isOpen)
    iconClose?.classList.toggle("hidden", isOpen)
  })

  // Cerrar el menú al pulsar un link
  document.querySelectorAll(".mobile-link").forEach(link => {
    link.addEventListener("click", () => {
      mobileMenu?.classList.add("hidden")
      iconOpen?.classList.remove("hidden")
      iconClose?.classList.add("hidden")
    })
  })
</script>